{"ast":null,"code":"var _jsxFileName = \"/Users/lex/Documents/PiXL/Web-Application/src/components/Unity/UnityComponent.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"../../App.css\";\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport { setTimeout } from \"timers\";\nimport { compose } from \"@taquito/taquito\";\nimport { Tzip12Module, tzip12 } from \"@taquito/tzip12\";\nimport { Tzip16Module, tzip16 } from \"@taquito/tzip16\";\nimport { MintProvider } from \"../../services/mintProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst unityContext = new UnityContext({\n  loaderUrl: \"Build/1.loader.js\",\n  dataUrl: \"Build/1.data\",\n  frameworkUrl: \"Build/1.framework.js\",\n  codeUrl: \"Build/1.wasm\"\n});\n\nconst UnityComponent = ({\n  Tezos,\n  publicToken,\n  userAddress,\n  userBalance,\n  setUserBalance\n}) => {\n  _s();\n\n  const mintProvider = new MintProvider();\n\n  document.onfullscreenchange = function (event) {\n    unityContext.setFullscreen(false);\n  };\n\n  unityContext.on(\"WhereWallet\", function (userName, score) {});\n  unityContext.on(\"GameOver\", function (userName, score) {});\n  unityContext.on(\"MintThis\", function (itemName, score) {\n    if (itemName) {\n      mintContract(itemName, score);\n    }\n  });\n  unityContext.on(\"ShareQuest\", function (questDetails, Id) {\n    shareQuest(questDetails, Id);\n  });\n  let isCalled = false;\n  const [items, setItem] = useState([]);\n\n  const mintContract = async (itemName, score) => {\n    const result = await mintProvider.mintItem();\n    const tempItems = items;\n    tempItems.push(result);\n    setItem(tempItems);\n    setUserBalance(Math.random()); // used to rerender Todo replace with better method\n  };\n\n  const shareQuest = async (questDetails, Id) => {\n    await mintProvider.shareQuest(questDetails, Id);\n    alert(\"Quest has been shared\");\n  };\n\n  const createImageSrc = artifactUri => {\n    if (artifactUri) {\n      return \"https://cloudflare-ipfs.com/ipfs/\" + artifactUri.split(\"//\")[1];\n    } else {\n      return \"error\";\n    }\n  };\n\n  const buildCards = async metaDataArray => {\n    setItem(await Promise.all(metaDataArray.map(item => {\n      return {\n        name: item.name,\n        imageSrc: createImageSrc(item.artifactUri),\n        alt: item.token_id.toString()\n      };\n    })));\n  };\n\n  const findOtherCards = async () => {\n    const contractAddress = \"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton\";\n    const contract = await Tezos.contract.at(contractAddress, compose(tzip16, tzip12));\n    const storage = await contract.storage();\n    const ledger = storage.ledger || storage.accounts;\n    const metaDataArray = await Promise.all([578802, 578806, 578810, 578813].map(async number => {\n      const val = await ledger.get({\n        0: \"tz1dmSoZi281eKeU4B3W53LrAoqSa8kpCd6w\",\n        1: number\n      });\n\n      if (val) {\n        return await contract.tzip12().getTokenMetadata(number);\n      } else {\n        let x = {\n          token_id: 0,\n          decimals: 0\n        };\n        return x;\n      }\n    }));\n    metaDataArray.filter(item => item.token_id !== 0);\n\n    if (metaDataArray) {\n      buildCards(metaDataArray);\n    }\n  };\n\n  const setWalletAddress = () => {\n    unityContext.send(\"GameController\", \"ConnectWallet\", userAddress);\n  };\n\n  const addCard = (id, e, cardId) => {\n    const element = document.getElementById(id);\n\n    if (element) {\n      element.className = \"card animate__animated animate__backOutUp\";\n    }\n\n    cardId === \"entry Token\" ? unityContext.send(\"GameController\", \"InsertCoin\") : unityContext.send(\"GameController\", \"AddItem\", cardId);\n    findOtherCards();\n  };\n\n  const findInitialCoin = async () => {\n    Tezos.addExtension(new Tzip16Module());\n    Tezos.addExtension(new Tzip12Module());\n    const contractAddress = \"KT1SGdop74rGobKAETcBPnz9yQkH38hZnpBh\";\n    const tokenId = 1;\n    const contract = await Tezos.contract.at(contractAddress, compose(tzip16, tzip12));\n    console.log(`Fetching the token metadata for the token ID ${tokenId}...`); // const metatData = await contract.tzip12().getTokenMetadata(1);\n\n    const storage = await contract.storage();\n    const ledger = storage.ledger || storage.accounts;\n    const val = await ledger.get({\n      0: \"tz1dmSoZi281eKeU4B3W53LrAoqSa8kpCd6w\",\n      1: 1\n    });\n\n    if (!val) {\n      return;\n    }\n\n    let x = [];\n    x.push({\n      name: \"entry token\",\n      imageSrc: \"https://cloudflare-ipfs.com/ipfs/QmPTFsFgEYfS3VV9uaTWfWUQGVqbaHa1t2npBUQZ4NiAvP\",\n      alt: \"entry Token\"\n    });\n    setItem(x);\n    setUserBalance(1);\n  };\n\n  useEffect(() => {\n    if ((userAddress === null || userAddress === void 0 ? void 0 : userAddress.length) > 1 && !isCalled) {\n      isCalled = true;\n      findInitialCoin();\n      setTimeout(() => {\n        setWalletAddress();\n      }, 10000);\n    }\n  }, [userAddress]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center ml-auto mr-auto unity-container\",\n      children: /*#__PURE__*/_jsxDEV(Unity, {\n        unityContext: unityContext,\n        style: {\n          height: \"100%\",\n          width: 950,\n          border: \"2px solid black\",\n          background: \"grey\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this), items.length > 0 ? /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"card-list mt-2 ml-auto mr-auto items-center justify-center\",\n      children: items.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        id: user.alt,\n        onClick: e => addCard(user.alt, e, user.alt),\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          onClick: e => addCard(user.alt, e, user.alt),\n          src: user.imageSrc,\n          alt: \"this slowpoke moves\",\n          style: {\n            height: \"202\",\n            width: \"202\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 29\n        }, this)\n      }, user.alt, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-row ml-auto mr-auto mt-10 w-6/12 h-32 justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-white \",\n        children: [\" Oh no! We can't find any tokens,Please make sure your wallet is synced and you have purchased the token \", /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"underline\",\n          href: \"https://objkt.com/asset/KT1SGdop74rGobKAETcBPnz9yQkH38hZnpBh/1\",\n          target: \"_blank\",\n          children: \"here\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 154\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true);\n};\n\n_s(UnityComponent, \"9TtPWkbVJgaeKs0W1gLFyC+D8I8=\");\n\n_c = UnityComponent;\nexport default UnityComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"UnityComponent\");","map":{"version":3,"sources":["/Users/lex/Documents/PiXL/Web-Application/src/components/Unity/UnityComponent.tsx"],"names":["React","useEffect","useState","Unity","UnityContext","setTimeout","compose","Tzip12Module","tzip12","Tzip16Module","tzip16","MintProvider","unityContext","loaderUrl","dataUrl","frameworkUrl","codeUrl","UnityComponent","Tezos","publicToken","userAddress","userBalance","setUserBalance","mintProvider","document","onfullscreenchange","event","setFullscreen","on","userName","score","itemName","mintContract","questDetails","Id","shareQuest","isCalled","items","setItem","result","mintItem","tempItems","push","Math","random","alert","createImageSrc","artifactUri","split","buildCards","metaDataArray","Promise","all","map","item","name","imageSrc","alt","token_id","toString","findOtherCards","contractAddress","contract","at","storage","ledger","accounts","number","val","get","getTokenMetadata","x","decimals","filter","setWalletAddress","send","addCard","id","e","cardId","element","getElementById","className","findInitialCoin","addExtension","tokenId","console","log","length","height","width","border","background","user"],"mappings":"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","sourcesContent":["import React, { Dispatch, SetStateAction, useEffect, useState } from \"react\";\nimport \"../../App.css\";\nimport Unity, { UnityContext } from \"react-unity-webgl\";\nimport { setTimeout } from \"timers\";\nimport { compose, TezosToolkit, MichelsonMap } from \"@taquito/taquito\";\nimport { Tzip12Module, tzip12, TokenMetadata } from \"@taquito/tzip12\";\nimport { Tzip16Module, tzip16 } from \"@taquito/tzip16\";\nimport { BigNumber } from 'bignumber.js';\nimport { MintProvider } from \"../../services/mintProvider\";\n\ntype ButtonProps = {\n    Tezos: TezosToolkit;\n    publicToken: string | null;\n    userAddress: string;\n    userBalance: number;\n    setUserBalance: Dispatch<SetStateAction<number>>;\n};\n\nexport type ItemType = {\n    name: string,\n    imageSrc: string,\n    alt: string\n}\n\nconst unityContext = new UnityContext({\n    loaderUrl: \"Build/1.loader.js\",\n    dataUrl: \"Build/1.data\",\n    frameworkUrl: \"Build/1.framework.js\",\n    codeUrl: \"Build/1.wasm\",\n});\n\nconst UnityComponent = ({\n    Tezos,\n    publicToken,\n    userAddress,\n    userBalance,\n    setUserBalance,\n}: ButtonProps): JSX.Element => {\n    const mintProvider = new MintProvider()\n    document.onfullscreenchange = function (event) {\n        unityContext.setFullscreen(false);\n    };\n    unityContext.on(\"WhereWallet\", function (userName, score) {\n    });\n    unityContext.on(\"GameOver\", function (userName, score) {\n    });\n    unityContext.on(\"MintThis\", function (itemName, score) {\n        if (itemName) {\n            mintContract(itemName, score);\n        }\n    });\n    unityContext.on(\"ShareQuest\", function (questDetails, Id) {\n        shareQuest(questDetails, Id);\n    });\n    let isCalled = false;\n    const [items, setItem] = useState<Array<ItemType>>([]);\n\n    const mintContract = async (itemName: any, score: any) => {\n        const result = await mintProvider.mintItem()\n        const tempItems = items;\n        tempItems.push(result);\n        setItem(tempItems);\n        setUserBalance(Math.random()); // used to rerender Todo replace with better method\n    }\n\n    const shareQuest = async (questDetails: any, Id: any) => {\n        await mintProvider.shareQuest(questDetails, Id);\n        alert(\"Quest has been shared\")\n    }\n\n    const createImageSrc = (artifactUri: string | undefined) => {\n        if (artifactUri) {\n            return \"https://cloudflare-ipfs.com/ipfs/\" + artifactUri.split(\"//\")[1]\n        } else {\n            return \"error\"\n        }\n    }\n\n    const buildCards = async (metaDataArray: TokenMetadata[]) => {\n        setItem(await Promise.all(metaDataArray.map((item) => {\n            return {\n                name: item.name as string,\n                imageSrc: createImageSrc(item.artifactUri) as string,\n                alt: item.token_id.toString(),\n            }\n        })))\n    }\n\n    const findOtherCards = async () => {\n        const contractAddress = \"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton\";\n        const contract = await Tezos.contract.at(contractAddress, compose(tzip16, tzip12));\n        const storage: any = await contract.storage();\n        const ledger = storage.ledger || storage.accounts;\n        const metaDataArray: TokenMetadata[] = await Promise.all([578802, 578806, 578810, 578813].map(async (number) => {\n            const val = await ledger.get({ 0: \"tz1dmSoZi281eKeU4B3W53LrAoqSa8kpCd6w\", 1: number });\n            if (val) {\n                return await contract.tzip12().getTokenMetadata(number);\n            } else {\n                let x: TokenMetadata = {\n                    token_id: 0,\n                    decimals: 0\n                }\n                return x as TokenMetadata\n            }\n        }))\n\n        metaDataArray.filter((item) => item.token_id !== 0)\n\n        if (metaDataArray) {\n            buildCards(metaDataArray);\n        }\n    }\n\n    const setWalletAddress = () => {\n        unityContext.send(\"GameController\", \"ConnectWallet\", userAddress);\n    }\n\n    const addCard = (id: string, e: React.MouseEvent<HTMLElement, MouseEvent>, cardId: string) => {\n        const element = document.getElementById(id);\n        if (element) {\n            element.className = \"card animate__animated animate__backOutUp\"\n        }\n        cardId === \"entry Token\" ? unityContext.send(\"GameController\", \"InsertCoin\") : unityContext.send(\"GameController\", \"AddItem\", cardId);\n\n        findOtherCards();\n    }\n\n    const findInitialCoin = async () => {\n        Tezos.addExtension(new Tzip16Module());\n        Tezos.addExtension(new Tzip12Module());\n\n        const contractAddress = \"KT1SGdop74rGobKAETcBPnz9yQkH38hZnpBh\";\n        const tokenId = 1;\n        const contract = await Tezos.contract.at(contractAddress, compose(tzip16, tzip12));\n\n        console.log(`Fetching the token metadata for the token ID ${tokenId}...`);\n        // const metatData = await contract.tzip12().getTokenMetadata(1);\n        const storage: any = await contract.storage();\n        const ledger = storage.ledger || storage.accounts;\n        const val = await ledger.get({ 0: \"tz1dmSoZi281eKeU4B3W53LrAoqSa8kpCd6w\", 1: 1 });\n        if (!val) { return }\n        let x = []\n        x.push({\n            name: \"entry token\",\n            imageSrc: \"https://cloudflare-ipfs.com/ipfs/QmPTFsFgEYfS3VV9uaTWfWUQGVqbaHa1t2npBUQZ4NiAvP\",\n            alt: \"entry Token\"\n        })\n        setItem(x)\n        setUserBalance(1);\n    }\n\n    useEffect(() => {\n        if (userAddress?.length > 1 && !isCalled) {\n            isCalled = true;\n            findInitialCoin();\n            setTimeout(() => {\n                setWalletAddress();\n            }, 10000);\n        }\n    }, [userAddress]);\n\n    return (\n        <>\n            <div className=\"flex flex-col items-center ml-auto mr-auto unity-container\">\n                <Unity unityContext={unityContext} style={{\n                    height: \"100%\",\n                    width: 950,\n                    border: \"2px solid black\",\n                    background: \"grey\",\n                }} />\n            </div>\n            {items.length > 0 ?\n                <section className=\"card-list mt-2 ml-auto mr-auto items-center justify-center\">\n                    {items.map((user) => (\n                        <div key={user.alt} id={user.alt} onClick={(e) => addCard(user.alt, e, user.alt)} className=\"card\">\n                            <img onClick={(e) => addCard(user.alt, e, user.alt)} src={user.imageSrc} alt=\"this slowpoke moves\" style={{\n                                height: \"202\",\n                                width: \"202\",\n                            }} />\n                        </div>\n                    ))}\n                </section>\n                : <div className=\"flex flex-row ml-auto mr-auto mt-10 w-6/12 h-32 justify-center\">\n                    <h1 className=\"text-white \"> Oh no! We can't find any tokens,Please make sure your wallet is synced and you have purchased the token <a className=\"underline\" href=\"https://objkt.com/asset/KT1SGdop74rGobKAETcBPnz9yQkH38hZnpBh/1\" target=\"_blank\">here</a></h1>\n                </div>\n            }\n        </>\n    );\n}\n\nexport default UnityComponent"]},"metadata":{},"sourceType":"module"}