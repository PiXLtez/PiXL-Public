(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{101:function(e,t,n){},146:function(e,t){},201:function(e,t,n){},207:function(e,t){},209:function(e,t){},232:function(e,t){},236:function(e,t){},237:function(e,t){},255:function(e,t){},257:function(e,t){},267:function(e,t){},269:function(e,t){},302:function(e,t){},304:function(e,t){},309:function(e,t){},311:function(e,t){},323:function(e,t){},326:function(e,t){},352:function(e,t){},377:function(e,t,n){"use strict";n.r(t);var r,a=n(18),s=n.n(a),c=n(187),o=n.n(c),i=(n(200),n(201),n(19)),u=n(29),l=(n(101),n(2)),d=n(0),f=n.n(d),b=n(25),p=n(191),m=n(13),j=n(4),h=function(e){var t=e.Tezos,n=e.setContract,r=e.setWallet,s=e.setUserAddress,c=e.setUserBalance,o=(e.setStorage,e.contractAddress),u=e.setBeaconConnection,d=e.setPublicToken,h=e.wallet,x=Object(a.useState)(!1),w=Object(i.a)(x,2),O=(w[0],w[1],function(){var e=Object(b.a)(f.a.mark((function e(r){var a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(r),e.next=3,t.tz.getBalance(r);case 3:return a=e.sent,c(a.toNumber()),e.next=7,t.wallet.at(o);case 7:return i=e.sent,e.next=10,i.storage();case 10:e.sent,n(i);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.requestPermissions({network:{type:m.p.MAINNET,rpcUrl:"https://mainnet.api.tez.ie"}});case 3:return e.next=5,h.getPKH();case 5:return t=e.sent,e.next=8,O(t);case 8:u(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){Object(b.a)(f.a.mark((function e(){var n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new p.a({name:"Taquito Boilerplate",preferredNetwork:m.p.MAINNET,disableDefaultEvents:!0,eventHandlers:(n={},Object(l.a)(n,m.e.PAIR_INIT,{handler:m.K.PAIR_INIT}),Object(l.a)(n,m.e.PAIR_SUCCESS,{handler:function(e){return d(e.publicKey)}}),n)}),t.setWalletProvider(a),r(a),e.next=5,a.client.getActiveAccount();case 5:if(!e.sent){e.next=13;break}return e.next=9,a.getPKH();case 9:return s=e.sent,e.next=12,O(s);case 12:u(!0);case 13:case"end":return e.stop()}}),e)})))()}),[]),Object(j.jsx)("div",{className:"buttons",children:Object(j.jsx)("button",{className:"button",onClick:v,children:Object(j.jsxs)("span",{children:[Object(j.jsx)("i",{className:"fas fa-wallet"}),"\xa0 Sync Wallet"]})})})},x=function(e){var t=e.wallet,n=e.setPublicToken,r=e.setUserAddress,a=e.setUserBalance,s=e.setWallet,c=e.setTezos,o=e.setBeaconConnection,i=function(){var e=Object(b.a)(f.a.mark((function e(){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(""),a(0),s(null),i=new u.b("https://mainnet.api.tez.ie"),c(i),o(!1),n(null),console.log("disconnecting wallet"),!t){e.next=15;break}return e.next=11,t.client.removeAllAccounts();case 11:return e.next=13,t.client.removeAllPeers();case 13:return e.next=15,t.client.destroy();case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"buttons",children:Object(j.jsxs)("button",{className:"button",onClick:i,children:[Object(j.jsx)("i",{className:"fas fa-times"}),"\xa0 Disconnect wallet"]})})},w=function(e){var t,n=e.Tezos,r=e.setContract,a=e.setWallet,c=e.setUserAddress,o=e.setUserBalance,u=e.setStorage,l=e.contractAddress,d=e.setBeaconConnection,f=e.setPublicToken,b=e.wallet,p=e.publicToken,m=e.userAddress,w=e.userBalance,O=e.setTezos,v=s.a.useState(!1),k=Object(i.a)(v,2),g=k[0],y=k[1];return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("nav",{className:"relative flex flex-wrap items-center justify-between px-2 py-3 bg-gray-700 mb-3",children:Object(j.jsxs)("div",{className:"container px-4 mx-auto flex flex-wrap items-center justify-between",children:[Object(j.jsxs)("div",{className:"w-full relative flex justify-between lg:w-auto lg:static lg:block lg:justify-start",children:[Object(j.jsx)("a",{className:"text-sm font-bold leading-relaxed inline-block mr-4 py-2 whitespace-nowrap uppercase text-white",children:"PiXl"}),Object(j.jsx)("button",{className:"text-white cursor-pointer text-xl leading-none px-3 py-1 border border-solid border-transparent rounded bg-transparent block lg:hidden outline-none focus:outline-none",type:"button",onClick:function(){return y(!g)},children:Object(j.jsx)("i",{className:"fas fa-bars"})})]}),Object(j.jsx)("div",{className:"lg:flex flex-grow items-center"+(g?" flex":" hidden"),id:"example-navbar-danger",children:Object(j.jsx)("ul",{className:"flex flex-col lg:flex-row list-none lg:ml-auto",children:Object(j.jsx)("li",{className:"nav-item",children:p||m||w?Object(j.jsxs)("div",{className:"flex flex-row gap-4",children:[Object(j.jsx)(x,{wallet:b,setPublicToken:f,setUserAddress:c,setUserBalance:o,setWallet:a,setTezos:O,setBeaconConnection:d}),(t=m,t.substr(0,5)+"..."+t.substr(t.length-5))]}):Object(j.jsx)(h,{Tezos:n,setContract:r,setPublicToken:f,setWallet:a,setUserAddress:c,setUserBalance:o,setStorage:u,contractAddress:l,setBeaconConnection:d,wallet:b})})})})]})})})},O=n(68),v=n.n(O),k=n(62),g=n(50),y=n(30),T=n(1),S=n(3),N=function(){function e(){Object(T.a)(this,e)}return Object(S.a)(e,[{key:"mintItem",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/transfer",{mode:"no-cors",method:"GET",headers:{"Content-Type":"application/json"}});case 2:return e.sent,e.abrupt("return",{name:"Tezzard",imageSrc:this.createImageSrc("zdj7WcZdmBjTNB9CowV1GPqJUFdiM41YFEkHTnwiKixgHaerZ"),alt:"Placeholder"});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shareQuest",value:function(){var e=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/api/transfer/shareQuest",{mode:"no-cors",method:"POST",body:JSON.stringify({questDetails:t,Id:n}),headers:{"Content-Type":"application/json"}});case 2:return e.sent,e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createImageSrc",value:function(e){return e?"https://cloudflare-ipfs.com/ipfs/"+e:"error"}}]),e}(),B=new O.UnityContext({loaderUrl:"Build/1.loader.js",dataUrl:"Build/1.data",frameworkUrl:"Build/1.framework.js",codeUrl:"Build/1.wasm"}),C=function(e){var t=e.Tezos,n=(e.publicToken,e.userAddress),r=(e.userBalance,e.setUserBalance),s=new N;document.onfullscreenchange=function(e){B.setFullscreen(!1)},B.on("WhereWallet",(function(e,t){})),B.on("GameOver",(function(e,t){})),B.on("MintThis",(function(e,t){e&&m(e,t)})),B.on("ShareQuest",(function(e,t){h(e,t)}));var c=!1,o=Object(a.useState)([]),l=Object(i.a)(o,2),d=l[0],p=l[1],m=function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.mintItem();case 2:a=e.sent,(c=d).push(a),p(c),r(Math.random());case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.shareQuest(t,n);case 2:alert("Quest has been shared");case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,Promise.all(t.map((function(e){return{name:e.name,imageSrc:(t=e.artifactUri,t?"https://cloudflare-ipfs.com/ipfs/"+t.split("//")[1]:"error"),alt:e.token_id.toString()};var t})));case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(f.a.mark((function e(){var n,r,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",e.next=3,t.contract.at("KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",Object(u.c)(y.f,g.b));case 3:return n=e.sent,e.next=6,n.storage();case 6:return r=e.sent,a=r.ledger||r.accounts,e.next=10,Promise.all([578802,578806,578810,578813].map(function(){var e=Object(b.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get({0:"tz1dmSoZi281eKeU4B3W53LrAoqSa8kpCd6w",1:t});case 2:if(!e.sent){e.next=9;break}return e.next=6,n.tzip12().getTokenMetadata(t);case 6:return e.abrupt("return",e.sent);case 9:return r={token_id:0,decimals:0},e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:(s=e.sent).filter((function(e){return 0!==e.token_id})),s&&x(s);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,n){var r=document.getElementById(e);r&&(r.className="card animate__animated animate__backOutUp"),"entry Token"===n?B.send("GameController","InsertCoin"):B.send("GameController","AddItem",n),w()},T=function(){var e=Object(b.a)(f.a.mark((function e(){var n,a,s,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.addExtension(new y.d),t.addExtension(new g.a),"KT1SGdop74rGobKAETcBPnz9yQkH38hZnpBh",n=1,e.next=6,t.contract.at("KT1SGdop74rGobKAETcBPnz9yQkH38hZnpBh",Object(u.c)(y.f,g.b));case 6:return a=e.sent,console.log("Fetching the token metadata for the token ID ".concat(n,"...")),e.next=10,a.storage();case 10:return s=e.sent,c=s.ledger||s.accounts,e.next=14,c.get({0:"tz1dmSoZi281eKeU4B3W53LrAoqSa8kpCd6w",1:1});case 14:if(e.sent){e.next=17;break}return e.abrupt("return");case 17:(o=[]).push({name:"entry token",imageSrc:"https://cloudflare-ipfs.com/ipfs/QmPTFsFgEYfS3VV9uaTWfWUQGVqbaHa1t2npBUQZ4NiAvP",alt:"entry Token"}),p(o),r(1);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(null===n||void 0===n?void 0:n.length)>1&&!c&&(c=!0,T(),Object(k.setTimeout)((function(){B.send("GameController","ConnectWallet",n)}),1e4))}),[n]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"flex flex-col items-center ml-auto mr-auto unity-container",children:Object(j.jsx)(v.a,{unityContext:B,style:{height:"100%",width:950,border:"2px solid black",background:"grey"}})}),d.length>0?Object(j.jsx)("section",{className:"card-list mt-2 ml-auto mr-auto items-center justify-center",children:d.map((function(e){return Object(j.jsx)("div",{id:e.alt,onClick:function(t){return O(e.alt,0,e.alt)},className:"card",children:Object(j.jsx)("img",{onClick:function(t){return O(e.alt,0,e.alt)},src:e.imageSrc,alt:"this slowpoke moves",width:"250"})},e.alt)}))}):Object(j.jsx)("div",{className:"flex flex-row ml-auto mr-auto mt-10 w-6/12 h-32 justify-center",children:Object(j.jsxs)("h1",{className:"text-white ",children:[" Oh no! We can't find any tokens,Please make sure your wallet is synced and you have purchased the token ",Object(j.jsx)("a",{className:"underline",href:"https://objkt.com/asset/KT1SGdop74rGobKAETcBPnz9yQkH38hZnpBh/1",target:"_blank",children:"here"})]})})]})};!function(e){e.NONE="",e.LISTENING="Listening to P2P channel",e.CONNECTED="Channel connected",e.PERMISSION_REQUEST_SENT="Permission request sent, waiting for response",e.PERMISSION_REQUEST_SUCCESS="Wallet is connected"}(r||(r={}));var U=function(){var e=Object(a.useState)(new u.b("https://mainnet.api.tez.ie")),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(void 0),c=Object(i.a)(s,2),o=(c[0],c[1]),l=Object(a.useState)(""),d=Object(i.a)(l,2),f=d[0],b=d[1],p=Object(a.useState)(null),m=Object(i.a)(p,2),h=m[0],x=m[1],O=Object(a.useState)(""),v=Object(i.a)(O,2),k=v[0],g=v[1],y=Object(a.useState)(0),T=Object(i.a)(y,2),S=T[0],N=T[1],B=Object(a.useState)(0),U=Object(i.a)(B,2),P=(U[0],U[1]),A=Object(a.useState)(!1),E=Object(i.a)(A,2),I=(E[0],E[1],Object(a.useState)(!1)),z=Object(i.a)(I,2),W=(z[0],z[1]),K=Object(a.useState)("transfer"),G=Object(i.a)(K,2);G[0],G[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(w,{Tezos:n,setContract:o,setPublicToken:b,setWallet:x,setUserAddress:g,setUserBalance:N,setStorage:P,contractAddress:"KT1SGdop74rGobKAETcBPnz9yQkH38hZnpBh",setBeaconConnection:W,wallet:h,publicToken:f,userAddress:k,userBalance:S,setTezos:r}),Object(j.jsx)(C,{Tezos:n,publicToken:f,userAddress:k,userBalance:S,setUserBalance:N})]})},P=n(7),A=n(6),E=new O.UnityContext({loaderUrl:"build/myunityapp.loader.js",dataUrl:"build/myunityapp.data",frameworkUrl:"build/myunityapp.framework.js",codeUrl:"build/myunityapp.wasm"});s.a.Component,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(U,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[377,1,2]]]);
//# sourceMappingURL=main.ceaa6844.chunk.js.map